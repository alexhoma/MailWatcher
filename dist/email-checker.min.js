var emailChecker;emailChecker={whitelist:["gmail","hotmail","yahoo","outlook","derecho"],blacklist:["gemail","gmil","gmal","emai","gmai","hotmal","hormal","hormail","homail","hitmail","hotamail","yaho","yahho","yahooo","yaaho","outlok","oultook","utlook","outoolk"],validTLDs:["es","com"],check:function(a){var b,c=a.value,d=this.splitEmail(c),e=d.user,f=d.domain,g=d.tld,h=this.validationApproach(f);if(h)return!0;if(b=this.repairEmail(f),"undefined"!=typeof b){var i=e+"@"+b+"."+g,j=a.value=i;return j}return!0},splitEmail:function(a){var b,c,d,e=a.indexOf("@");return e>-1&&(d=a.split("@")[0],d=this.sanitize(d),b=a.split("@")[1],b=b.split(".")[0],b=this.sanitize(b),c=a.substr(e,a.length),c=c.split(".")[1],c=this.sanitize(c)),{user:d,domain:b,tld:c}},validationApproach:function(a){var b,c,d=this.blacklist,e=this.whitelist,f=!1;for(i=0;i<e.length;i++)if(c=this.levenshtein(e[i],a),0==c){b=!0;break}if("undefined"==typeof b)for(i=0;i<d.length;i++)if(d[i]==a){b=!1,f=!0;break}if("undefined"==typeof b&&a.length>5){var g;for(i=0;i<e.length;i++)if(g=Math.round(e[i].length-a.length),g>=-1&&g<=1&&(c=this.levenshtein(e[i],a),c>=1&&c<=2)){b=!1;break}}return"undefined"==typeof b?(console.log("El email no figura en nustra lista de emails v치lidos. Pero es muy probable que sea correcto."),b=!0):b},repairEmail:function(a){var b,c,d=[];for(i=0;i<this.whitelist.length;i++)c=this.levenshtein(this.whitelist[i],a),c>=1&&c<=2&&d.push(this.whitelist[i]);if(0!=!d.length)throw new Error("Unknown error: no matches for this email.");return 1==d.length?b=d[0]:console.log("Hay m치s de un email v치lido que coincide con la correcci칩n. Por tanto no lo vamos a corregir."),b},levenshtein:function(a,b){var c=[],d=a.length,e=b.length;if(0==d)return e;if(0==e)return d;for(var f=d;f>=0;f--)c[f]=[];for(var f=d;f>=0;f--)c[f][0]=f;for(var g=e;g>=0;g--)c[0][g]=g;for(var f=1;f<=d;f++)for(var h=a.charAt(f-1),g=1;g<=e;g++){if(f==g&&c[f][g]>4)return d;var i=b.charAt(g-1),j=h==i?0:1,k=c[f-1][g]+1,l=c[f][g-1]+1,m=c[f-1][g-1]+j;l<k&&(k=l),m<k&&(k=m),c[f][g]=k,f>1&&g>1&&h==b.charAt(g-2)&&a.charAt(f-2)==i&&(c[f][g]=Math.min(c[f][g],c[f-2][g-2]+j))}return c[d][e]},sanitize:function(a){var b;return b=a.trim(),b=b.replace(" ","")}};